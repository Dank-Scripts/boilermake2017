<form id='form' .down>
  <input id='ioinput' autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
</form>
<script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script type="text/javascript">
  var url = document.URL;
  var form = document.getElementById('form');
  var io = document.getElementById('ioinput');
  url = url.replace("http", "ws") + "ws";
  console.log(url+"ws");
  var conn = new WebSocket(url);
  
  $(window).on('beforeunload', function(){
      conn.close();
  });
  conn.onmessage = function(e) {
    console.log(e.data);
  }
  form.addEventListener("submit", function(e){
      e.preventDefault();
      if(sent){ 
        conn.send(io.value);
        io.value = '';
      }
  });
  function sendEof(){
    console.log('closing stdin');
    conn.send("{*--EOF--*}");
  }
</script>